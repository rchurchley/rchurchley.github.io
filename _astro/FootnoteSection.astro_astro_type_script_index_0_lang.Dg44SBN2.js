function y(n,e){var i;const t=(((i=n.ownerDocument)===null||i===void 0?void 0:i.defaultView)||window).getComputedStyle(n);return t.getPropertyValue(e)||t[e]}const b=96,A=25.4,Q=72,Z=6;function T(n){return n?y(n,"fontSize")||T(n.parentElement):y(window.document.documentElement,"fontSize")}function ee(n){var e;const i=n||"0",l=parseFloat(i),t=i.match(/[\d-.]+(\w+)$/),r=(e=t?.[1])!==null&&e!==void 0?e:"";return[l,r.toLowerCase()]}function C(n,e){var i,l;const t=(l=(i=e?.ownerDocument)===null||i===void 0?void 0:i.defaultView)!==null&&l!==void 0?l:window,r=t.document.documentElement||t.document.body,[o,m]=ee(n);switch(m){case"rem":return o*C(T(window.document.documentElement));case"em":return o*C(T(e),e?.parentElement);case"in":return o*b;case"q":return o*b/A/4;case"mm":return o*b/A;case"cm":return o*b*10/A;case"pt":return o*b/Q;case"pc":return o*b/Z;case"vh":return(o*t.innerHeight||r.clientWidth)/100;case"vw":return(o*t.innerWidth||r.clientHeight)/100;case"vmin":return o*Math.min(t.innerWidth||r.clientWidth,t.innerHeight||r.clientHeight)/100;case"vmax":return o*Math.max(t.innerWidth||r.clientWidth,t.innerHeight||r.clientHeight)/100;default:return o}}function L(n,e=0){let i=0,l;return Object.assign((...r)=>{const o=Math.max(0,i+e-Date.now());o?(clearTimeout(l),l=setTimeout(()=>{i=Date.now(),n(...r)},o)):(i=Date.now(),n(...r))},{cancel:()=>{i=0,clearTimeout(l)}})}function p(n,e){n.classList.add(e)}function v(n,e){n.classList.remove(e)}function P(n,e){return n.classList.contains(e)}const V="littlefoot__tooltip";function M(n){const e=Number.parseFloat(y(n,"marginLeft")),i=n.offsetWidth-e;return(n.getBoundingClientRect().left+i/2)/window.innerWidth}function te(n,e,i){const[l,t]=function(r,o){const m=Number.parseInt(y(o,"marginTop"),10),u=2*m+o.offsetHeight,s=r.getBoundingClientRect().top+r.offsetHeight/2,a=window.innerHeight-s;return a>=u||a>=s?["below",a-m-15]:["above",s-m-15]}(e,n);if(i!==l){v(n,"is-"+i),p(n,"is-"+l);const r=100*M(e)+"%",o=l==="above"?"100%":"0";n.style.transformOrigin=r+" "+o}return[l,t]}const w="is-active",E="is-changing",z="is-scrollable",N=n=>document.body.contains(n);function ne({id:n,button:e,content:i,host:l,popover:t,wrapper:r}){let o=0,m="above";return{id:n,activate:u=>{var s;e.setAttribute("aria-expanded","true"),p(e,E),p(e,w),e.insertAdjacentElement("afterend",t),t.style.maxWidth=document.body.clientWidth+"px",s=i,o=Math.round(C(y(s,"maxHeight"),s)),u?.(t,e)},dismiss:u=>{e.setAttribute("aria-expanded","false"),p(e,E),v(e,w),v(t,w),u?.(t,e)},isActive:()=>P(e,w),isReady:()=>!P(e,E),ready:()=>{p(t,w),v(e,E)},remove:()=>{t.remove(),v(e,E)},reposition:()=>{if(N(t)){const[u,s]=te(t,e,m);m=u,i.style.maxHeight=Math.min(o,s)+"px",t.offsetHeight<i.scrollHeight?(p(t,z),i.setAttribute("tabindex","0")):(v(t,z),i.removeAttribute("tabindex"))}},resize:()=>{N(t)&&(t.style.left=function(u,s){const a=u.offsetWidth;return-M(s)*a+Number.parseInt(y(s,"marginLeft"),10)+s.offsetWidth/2}(i,e)+"px",r.style.maxWidth=i.offsetWidth+"px",function(u,s){const a=u.querySelector("."+V);a&&(a.style.left=100*M(s)+"%")}(t,e))},destroy:()=>l.remove()}}const j="is-fully-scrolled",ie=n=>e=>{const i=e.currentTarget,l=-e.deltaY;l>0&&v(n,j),i&&l<=0&&l<i.clientHeight+i.scrollTop-i.scrollHeight&&p(n,j)},U="littlefoot__content",Y="littlefoot__wrapper",_="littlefoot--print",X=(...n)=>n.forEach(e=>p(e,_));function S(n,e){return Array.from(n.querySelectorAll(e))}function k(n,e){return n.querySelector("."+e)||n.firstElementChild||n}function O(n){const e=document.createElement("div");e.innerHTML=n;const i=e.firstElementChild;return i.remove(),i}function oe(n){return n!==void 0}function G(n){const e=n.parentElement,i=S(e,":scope > :not(."+_+")"),l=i.filter(t=>t.tagName==="HR");i.length===l.length&&(X(...l.concat(e)),G(e))}function J(n,e){const i=n.parentElement;n.remove(),i&&i!==e&&!i.innerHTML.replace(/(\[\]|&nbsp;|\s)/g,"")&&J(i,e)}function re([n,e,i],l){const t=O(i.outerHTML);S(t,'[href$="#'+n+'"]').forEach(o=>J(o,t));const r=t.innerHTML.trim();return[e,i,{id:String(l+1),number:l+1,reference:"lf-"+n,content:r.startsWith("<")?r:"<p>"+r+"</p>"}]}function F(n){return e=>n.replace(/<%=?\s*(\w+?)\s*%>/g,(i,l)=>{var t;return String((t=e[l])!==null&&t!==void 0?t:"")})}function se(n,e){const i=F(n),l=F(e);return([t,r])=>{const o=r.id,m=O('<span class="littlefoot">'+i(r)+"</span>"),u=m.firstElementChild;u.setAttribute("aria-expanded","false"),u.dataset.footnoteButton="",u.dataset.footnoteId=o;const s=O(l(r));s.dataset.footnotePopover="",s.dataset.footnoteId=o;const a=k(s,Y),f=k(s,U);return function(c,d){c.addEventListener("wheel",L(ie(d),16))}(f,s),t.insertAdjacentElement("beforebegin",m),{id:o,button:u,host:m,popover:s,content:f,wrapper:a}}}function ce({allowDuplicates:n,anchorParentSelector:e,anchorPattern:i,buttonTemplate:l,contentTemplate:t,footnoteSelector:r,numberResetSelector:o,scope:m}){const u=function(s,a,f){return S(s,f+' a[href*="#"]').filter(c=>(c.href+c.rel).match(a))}(document,i,m).map(function(s,a,f,c){const d=[];return h=>{const g=h.href.split("#")[1],R=g?S(s,"#"+window.CSS.escape(g)).find(D=>a||!d.includes(D)):void 0,x=R?.closest(c);if(x){d.push(x);const D=h.closest(f)||h;return[D.id||h.id,D,x]}}}(document,n,e,r)).filter(oe).map(re).map(o?function(s){let a=0,f=null;return([c,d,h])=>{const g=c.closest(s);return a=f===g?a+1:1,f=g,[c,d,Object.assign(Object.assign({},h),{number:a})]}}(o):s=>s).map(([s,a,f])=>(X(s,a),G(a),[s,f])).map(se(l,t)).map(ne);return{footnotes:u,unmount(){u.forEach(s=>s.destroy()),S(document,"."+_).forEach(s=>v(s,_))}}}const W="[data-footnote-id]",I=(n,e)=>n.target.closest(e),K=n=>n?.dataset.footnoteId,$=n=>e=>{e.preventDefault();const i=I(e,W),l=K(i);l&&n(l)},H=document.addEventListener,q=window.addEventListener,B=(n,e,i,l)=>H(n,t=>{const r=t.target;r?.closest(e)&&i.call(r,t)},l),le={activateDelay:100,activateOnHover:!1,allowDuplicates:!0,allowMultiple:!1,anchorParentSelector:"sup",anchorPattern:/(fn|footnote|note)[:\-_\d]/gi,dismissDelay:100,dismissOnUnhover:!1,dismissOnDocumentTouch:!0,footnoteSelector:"li",hoverDelay:250,numberResetSelector:"",scope:"",contentTemplate:`<aside class="littlefoot__popover" id="fncontent:<% id %>"><div class="${Y}"><div class="${U}"><% content %></div></div><div class="${V}"></div></aside>`,buttonTemplate:'<button class="littlefoot__button" id="<% reference %>" title="See Footnote <% number %>"><svg role="img" aria-labelledby="title-<% reference %>" viewbox="0 0 31 6" preserveAspectRatio="xMidYMid"><title id="title-<% reference %>">Footnote <% number %></title><circle r="3" cx="3" cy="3" fill="white"></circle><circle r="3" cx="15" cy="3" fill="white"></circle><circle r="3" cx="27" cy="3" fill="white"></circle></svg></button>'};function ae(n={}){const e=Object.assign(Object.assign({},le),n),i=function({footnotes:t,unmount:r},o){let m;const u=c=>d=>{d.isReady()&&(d.dismiss(o.dismissCallback),setTimeout(d.remove,c))},s=c=>d=>{o.allowMultiple||t.filter(h=>h.id!==d.id).forEach(u(o.dismissDelay)),d.isReady()&&(d.activate(o.activateCallback),d.reposition(),d.resize(),setTimeout(d.ready,c))},a=c=>d=>{const h=t.find(g=>g.id===d);h&&c(h)},f=()=>t.forEach(u(o.dismissDelay));return{activate:(c,d)=>a(s(d))(c),dismiss:(c,d)=>a(u(d))(c),dismissAll:f,touchOutside:()=>{o.dismissOnDocumentTouch&&f()},repositionAll:()=>t.forEach(c=>c.reposition()),resizeAll:()=>t.forEach(c=>c.resize()),toggle:a(c=>c.isActive()?u(o.dismissDelay)(c):s(o.activateDelay)(c)),hover:a(c=>{m=c.id,o.activateOnHover&&!c.isActive()&&s(o.hoverDelay)(c)}),unhover:a(c=>{c.id===m&&(m=null),o.dismissOnUnhover&&setTimeout(()=>t.filter(d=>d.id!==m).forEach(u(o.dismissDelay)),o.hoverDelay)}),unmount:r}}(ce(e),e),l=function(t){const r=c=>{const d=I(c,"[data-footnote-button]"),h=K(d);h?(c.preventDefault(),t.toggle(h)):I(c,"[data-footnote-popover]")||t.touchOutside()},o=L(t.repositionAll,16),m=L(t.resizeAll,16),u=$(t.hover),s=$(t.unhover),a=new AbortController,f={signal:a.signal};return H("touchend",r,f),H("click",r,f),H("keyup",c=>{c.keyCode!==27&&c.key!=="Escape"&&c.key!=="Esc"||t.dismissAll()},f),H("gestureend",o,f),q("scroll",o,f),q("resize",m,f),B("mouseover",W,u,f),B("mouseout",W,s,f),()=>{a.abort()}}(i);return{activate(t,r=e.activateDelay){i.activate(t,r)},dismiss(t,r=e.dismissDelay){t===void 0?i.dismissAll():i.dismiss(t,r)},unmount(){l(),i.unmount()},getSetting:t=>e[t],updateSetting(t,r){e[t]=r}}}ae();
